(function(f){var b='[data-fieldtype="video_url"]';var g={name:"youtube"};function d(){var j=f(this),h=f(this).val().match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),i=f(this).parent().find(".preview_video_url");
if(h!==null){f.getJSON("http://gdata.youtube.com/feeds/api/videos/"+h[1]+"?v=2&alt=jsonc",function(k){g.name="youtube";return c.call(j,k.data.id);});}else{i.hide();
}}function a(){var j=f(this),h=f(this).val().match(/(?:https?:\/{2})?(?:w{3}\.)?vim(?:eo)?\.(?:com)([^\s&]+)/),i=f(this).parent().find(".preview_video_url");
if(h!==null){g.name="vimeo";return c.call(j,h[1]);}else{i.hide();}}function e(){var h=f(this);service=h.val().match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);
if(service===null){a.call(h);}else{d.call(h);}}function c(l){var i=f(this).parent().find(".preview_video_url"),h=i.find("iframe"),k=i.find('[type="hidden"]');
if(g.name==="youtube"){var j=h.data("youtube-src")+l;}else{var j=h.data("vimeo-src")+l;}h.attr("src",j);k.val(JSON.stringify({url:f(this).val(),src:j}));
return i.show();}f(document).on("keyup",b,e);f(document).on("click",b,function(){f(this).select();});f(document).on("click",".show_video_url",function(h){f.colorbox({href:this.href,width:"600px",height:"400px",iframe:true});
return h.preventDefault();});f(function(){f.each(f(b),function(){e.call(this);});});})(window.jQuery);